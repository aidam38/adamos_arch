!function(){"use strict";function e(e){if("object"!=typeof e)return"";var t=[];return Object.keys(e).forEach(function(n){null!==e[n]&&"undefined"!=typeof e[n]&&t.push(n+"="+encodeURIComponent(e[n]))}),"?"+t.join("&")}function t(){var e=te.runtime.getManifest();return e.options_ui?e.options_ui.page:e.options_page}function n(){te.runtime.openOptionsPage?te.runtime.openOptionsPage():te.tabs.create({url:t()}),v()}function r(e){return e.i18n?te.i18n.getMessage(e.i18n)||e.name:e.name}function a(e){return e.toString()}function i(){return"undefined"==typeof te.tabs?Promise.resolve({}):new Promise(function(e){te.tabs.query({active:!0,currentWindow:!0},function(t){Ue=t[0],e(Ue)})})}function o(){if("1"===ye.newtab)return!0;var e=Ue&&Ue.url;return!!e&&(e.indexOf("/_/chrome/newtab")!==-1||e.startsWith("chrome://newtab")||e.startsWith("chrome://startpage")||"about:newtab"===e||"about:blank"===e)}function s(e){_e={},"object"==typeof e.customServicesDatabase&&(_e=e.customServicesDatabase||{}),xe=!e.openInCurrentTab&&(e.openInNewTabChrome||!o()),Se=e.noFocusTab,Ne=!he||e.showLaunchbox!==!1,Oe=ge&&e.displayMarketplaceApps,Ae=!(Ne||me&&e.showSettings===!1),ke=pe&&e.hideLabel,Le=Array.isArray(e.userList)?e.userList.map(a):cjgShortcuts.defaultSelection;var t=Number(e.shortcutIconSize);if(Ie=t&&t<48?t:48,pe&&(!fe||!ke)&&Ie<48&&(Ie=24),We=32===Ie||16===Ie?Ie:48,Te=.875*Ie,Me=Ie>32,ue){var n=e.displayMode||"grid",r=Number(e.iconBreak),i=r&&r>=.5;if("custom"!==n||i||(n="grid"),"grid"!==n||ke&&!Me){var s=Me?44:16,c=794,d=152,l=ke?16+Ie:d;Me&&(l=92);var u=Ie>16?4:5;"vertical"===n?u=1:"horizontal"===n?u=25:"custom"===n&&(u=Math.round(r)),u>Le.length&&(u=Le.length),be=s+u*l,Ne&&be<d?(ee=be,be=d):be>c&&(be=s+Math.floor((c-s)/l)*l),Fe=be<224;var p=be.toString()+"px";document.documentElement.style.width=p,document.body.style.width=p}}}function c(){return browserStorage.sync.get(["customShortcutsDatabase","displayMarketplaceApps","displayMode","hideLabel","iconBreak","noFocusTab","openInCurrentTab","openInNewTabChrome","shortcutIconSize","showLaunchbox","showSettings","userList"]).then(function(e){s(e||{})})}function d(e){var t=e.badge;if(t){var n=badgeIcons[t],r=!n&&alcIcons[t];if(n||r){var a=cjgShortcuts.badgeOnLeftIcons.indexOf(e.icon)!==-1,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("viewBox","0 0 48 48"),i.setAttribute("class","cj-shortcutlist__badge");var o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("transform",a?"translate(1, 27)":"translate(27, 27)"),i.appendChild(o);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M10,21.1421356 C15.5228475,21.1421356 20,16.6649831 20,11.1421356 C20,5.61928813 0,5.61928813 0,11.1421356 C0,16.6649831 4.4771525,21.1421356 10,21.1421356 Z"),s.setAttribute("style","fill:rgba(0,0,0,.1)"),o.appendChild(s);var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M20,10 C20,15.5228 15.5228,20 10,20 C4.47715,20 0,15.5228 0,10 C0,4.47715 4.47715,0 10,0 C15.5228,0 20,4.47715 20,10 Z"),c.setAttribute("style","fill:#f5f5f5"),o.appendChild(c);var d=document.createElementNS("http://www.w3.org/2000/svg","path");if(d.setAttribute("style","fill:rgba(0,0,0,.54)"),n)d.setAttribute("d",badgeIcons[t]),o.appendChild(d);else{var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.setAttribute("transform","translate(2,2) scale(0.66667)"),o.appendChild(l),d.setAttribute("d",alcIcons[t]),l.appendChild(d)}return i}}}function l(){return new Promise(function(e){te.tabs.executeScript({code:"window.getSelection().toString();",runAt:"document_start"},function(t){var n="";!te.runtime.lastError&&Array.isArray(t)&&"string"==typeof t[0]&&(n=t[0]),e(n)})})}function u(){return l().then(function(t){var n="";t.length>0&&(n+=t+"\n\n"),n+=Ue.url;var r=Ce.authuser||"0";return"https://mail.google.com/mail/u/"+r+"/"+e({ui:"2",view:"cm",tf:"0",su:Ue.title,body:n})})}function p(){var t="https://www.google.com/bookmarks/mark"+e({op:"add",bkmk:Ue.url,title:Ue.title,authuser:je});return Promise.resolve(t)}function h(){return l().then(function(t){return"https://www.google.com/maps"+e({q:t.replace(/\n|\r\n|\r/g,", ").replace(/ /g,"+"),authuser:je})})}function m(e){return window.fetch("https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyBiZYqhpRmNUArKPpqk7Wj15NIArVRmS6k",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({longUrl:e})}).then(function(e){return e.json()})}function g(){Pe&&(Pe.remove(),document.documentElement.classList.remove("cj-al--suggestiondisplayed"),k())}function f(){var e=!1;document.documentElement.classList.add("cj-al--urlshortenerdisplayed");var t=document.createElement("div");t.className="cj-al-appbar";var n=A("link");n.disabled=!0,t.appendChild(n);var r=document.createElement("input");r.readonly=!0,r.addEventListener("click",function(){e&&r.select()}),r.className="cj-al-appbar__input",r.value="Shortening...",t.appendChild(r);var a=A("content_copy");a.hidden=!0,a.title="Copy url",a.addEventListener("click",function(){r.focus(),r.select(),document.execCommand("copy",!1,null)}),t.appendChild(a);var i=A("close");return i.title="close",i.addEventListener("click",function(){document.documentElement.classList.remove("cj-al--urlshortenerdisplayed"),t.remove(),k()}),t.appendChild(i),g(),document.body.insertBefore(t,Be),window.scrollTo(0,0),k(),Ue.url.startsWith("moz-extension://")||Ue.url.startsWith("chrome-extension://")||Ue.url.startsWith("chrome://")||Ue.url.startsWith("opera://")||Ue.url.startsWith("about://")?void(r.value="Can't shorten this website url"):void m(Ue.url).then(function(t){t&&t.id&&t.id.startsWith("http")?(e=!0,a.hidden=!1,r.readonly=!1,r.value=t.id,r.focus(),r.select()):r.value="Oops. Error."},function(){r.value="Oops. Error."})}function v(e){console.log(e,"close"),ze?window.parent&&window.parent.postMessage({algClose:!0},"*"):window.close()}function w(e){var t={url:e};!oe&&Se&&(t.focused=!0),te.windows.create(t,v)}function b(e){var t={url:e};ze&&(t.index=Ue.index+1),Se&&(t.active=!1),te.tabs.create(t,v)}function y(e){te.tabs.update(Ue.id,{url:e},v)}function C(e,t){try{if("undefined"==typeof te.windows)window.open(e,"_blank"),v();else if(t.shiftKey)w(e);else{var n=e.replace("/u/0/","/");te.tabs.query({currentWindow:!0},function(r){for(var a=r.length;a>0;a--){var i=r[a-1],o=i.url;if("string"==typeof o&&(o.replace("/u/0/","/")===n||o.replace("/u/0/","/").split("?")[0].split("#")[0]===n))return void te.tabs.update(i.id,{active:!0},v)}xe||t[ie]||1===t.button?b(e):y(e)})}}catch(r){window.open(e,"_blank")}}function j(e,t){e().then(function(e){C(e,t)})}function E(e,t){if("178"===e)f();else if("172"===e)j(p,t);else if("175"===e)j(u,t);else if("176"===e)j(h,t);else if("-1"===e)n();else if(e in _e){var r=_e[e];C(r.url,t)}else{var a=cjgShortcuts.getUrl(e,Ce);a&&C(a,t)}}function _(e,t){return ze?void i().then(function(){E(e,t)},function(){E(e,t)}):void E(e,t)}function L(e){var t=document.createElement("div");t.className="cj-shortcutlist__icon";var n=Ie+"px";t.style.height=n,t.style.width=n;var r=d(e);r&&t.appendChild(r);var a=document.createElement("img");if(e.custom)a.src=e.iconUrl||"https://www.google.com/s2/favicons?domain_url="+encodeURIComponent(e.url),16!==Ie&&a.addEventListener("load",function(){a.naturalHeight<Te&&a.naturalWidth<Te&&t.classList.add("cj-shortcutlist__icon--box")});else{var i=e.icon;i&&"search"!==e.icon||(i="googleg"),a.src="images/"+We+"/"+i+"_"+We+"dp.svg",a.height=Ie,a.width=Ie}return t.appendChild(a),t}function x(e,t){var n=document.createElement("li");n.className="cj-shortcutlist__item",t&&(n.dataset.service=t),we&&(n.draggable=!0);var a=L({badge:e.badge,icon:e.icon,iconUrl:e.iconUrl,url:e.url,custom:!t||t in _e});n.appendChild(a);var i=r(e);if(n.dataset.queryLabel=i.toLowerCase(),ke)n.title=i;else{var o=document.createElement("div");o.className="cj-shortcutlist__label",o.textContent=i,n.appendChild(o)}return n}function S(e){e.postMessage({algHeight:document.body.scrollHeight,algWidth:document.body.scrollWidth},"*")}function k(){S(window.parent),S(window.top)}function N(){setTimeout(function(){window.location.reload()})}function A(e,t){var n=document.createElement("button");n.className="cj-md-iconbutton",t&&n.classList.add("cj-md-iconbutton--dark");var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 24 24"),r.style.height="24px",r.style.width="24px",n.appendChild(r);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",alcIcons[e]),r.appendChild(a),n}function O(){var e=A("settings");return e.title="Settings",e.addEventListener("click",n),e}function I(){var e=document.createElement("div");e.className="cj-al-configure";var t=document.createElement("button");t.className="cj-md-button cj-md-button--important cj-al-configure__button",t.textContent="Settings",t.addEventListener("click",n),e.appendChild(t);var r=O();return r.classList.add("cj-al-configure__iconbutton"),e.appendChild(r),e}function W(){var e=document.createElement("ul");return e.className="cj-shortcutlist",ee&&(e.style.width=ee+"px"),Me&&e.classList.add("cj-shortcutlist--grid"),ke&&e.classList.add("cj-shortcutlist--nolabels"),Ie<24&&e.classList.add("cj-shortcutlist--condensed"),e}function T(e){var t=e.target.dataset.service;t&&_(t,e)}function M(){browserStorage.sync.set({userList:Le})}function U(){Le=[];for(var e=0;e<Be.children.length;e++)Le.push(Be.children[e].dataset.service)}function q(e){e.dataTransfer.setData("text/plain","drag");var t=e.target;t.parentNode===Be&&(De.hidden=!1,Be.classList.add("cj-shortcutlist--dragging"),Re=t,setTimeout(function(){t.classList.add("cj-shortcutlist__item--dragging")}))}function B(e){De.hidden=!0,Be.classList.remove("cj-shortcutlist--dragging"),Re=null,e.target.classList.remove("cj-shortcutlist__item--dragging"),M(),k(),e.preventDefault()}function P(e){var t=e.target,n=Re.dataset.service;if(t===Be)Be.appendChild(Re);else if(t===De)Be.removeChild(Re);else{var r=Le.indexOf(n)<Le.indexOf(t.dataset.service)?t.nextSibling:t;Be.insertBefore(Re,r)}U()}function D(){var e=W();e.addEventListener("click",T),e.addEventListener("auxclick",T);for(var t=0;t<Le.length;t++){var n=Le[t],r=Ke[n]||_e[n];r&&e.appendChild(x(r,n))}return we&&(e.addEventListener("dragstart",q),e.addEventListener("dragend",B),e.addEventListener("dragenter",P)),e}function R(){return cjgOgs.getMarketplaceApps(Ce).then(function(e){return browserStorage.sync.setItem(Ee,e),e})}function z(){return browserStorage.sync.getItem(Ee).then(function(e){return Array.isArray(e)?e:[]})}function K(e,t,n){var r=window.devicePixelRatio*Ie>48,a=r?"iconUrl96x96":"iconUrl48x48";e.textContent="";var i=Array.isArray(n)&&n.length>0;t.hidden=!i,i&&n.forEach(function(t){var n=x({name:t.name,iconUrl:t[a]});n.addEventListener("click",function(e){C(t.url,e)}),e.appendChild(n)})}function F(){var e=document.createElement("div");e.hidden=!0;var t=document.createElement("div");t.className="cj-al-divider",e.appendChild(t);var n=W();e.appendChild(n);var r=!1;return z().then(function(t){r||K(n,e,t)}),R().then(function(t){r=!0,K(n,e,t)}),e}function H(){var e=document.createElement("div");if(e.className="cj-al-appbar",we){De=document.createElement("div"),De.hidden=!0,De.className="cj-al-droparea",De.addEventListener("drop",B),De.addEventListener("dragover",function(e){e.preventDefault()}),De.addEventListener("dragenter",P),e.appendChild(De);var t=A("delete");t.disabled=!0,De.appendChild(t);var n=document.createElement("div");n.className="cj-al-droparea__message",n.textContent="Drop here to remove shortcut",De.appendChild(n)}var r=A("search");r.disabled=!0,e.appendChild(r);var a=document.createElement("input");a.className="cj-al-appbar__input",a.autofocus=!0,a.placeholder=Fe?"Search":"Search and launch",a.addEventListener("input",function(){for(var e=a.value.toLowerCase(),t=document.querySelectorAll(".cj-shortcutlist > .cj-shortcutlist__item"),n=0;n<t.length;n++){var r=t[n];r.hidden=r.dataset.queryLabel.indexOf(e)===-1}if(Be.hidden=!Be.querySelector(".cj-shortcutlist__item:not([hidden])"),Oe){var i=qe.querySelector(".cj-shortcutlist__item:not([hidden])");qe.hidden=!i}ze&&setTimeout(k,1e-10)}),a.addEventListener("keyup",function(e){if("Enter"===e.key||13===e.keyCode){var t=Be.querySelector(".cj-shortcutlist__item:not([hidden])");if(t)return void _(t.dataset.service,e);var n=Oe&&qe.querySelector(".cj-shortcutlist__item:not([hidden])");n&&n.click()}}),window.addEventListener("message",function(e){e.data.algOpenState&&a.focus()}),e.appendChild(a);var i=O();return e.appendChild(i),e}function Z(){te.runtime.sendMessage({cjLandingOpen:!0})}function J(e){window.scrollTo(0,0),document.body.setAttribute("style","width: "+(be+e%2)+"px"),document.documentElement.setAttribute("style","width: "+be+"px; margin-left: "+(e-1)%2+"px"),e<2&&setTimeout(J.bind(null,e+1),100)}function V(e,t,n){t.indexOf(e)===-1&&(t.push(e),t.sort(),te.storage.local.set({suggestionBlacklist:t}));var r=n.indexOf(e);r>-1&&(n.splice(r,1),n.sort(),te.storage.local.set({suggestionWhitelist:n}))}function Y(e){var t=Ke[e]||_e[e];Le.indexOf(e)===-1&&t&&(Le.push(e),Be.appendChild(x(t,e)),M()),g()}function G(e){var t=document.createElement("div");t.className="cj-shortcutlist__icon";var n="48px";t.style.height=n,t.style.width=n;var r=d(e);r&&t.appendChild(r);var a=document.createElement("img");return a.src="images/48/"+(e.icon||"search")+"_48dp.svg",a.height=48,a.width=48,t.appendChild(a),t}function Q(e,t,n){var r=cjgShortcuts.list[e];document.documentElement.classList.add("cj-al--suggestiondisplayed");var a=document.createElement("div");a.className="cj-al-suggestion";var i=G(r);i.classList.add("cj-al-suggestion__icon"),a.appendChild(i);var o=A("close");o.classList.add("cj-al-suggestion__dismiss"),o.title="Dismiss",o.addEventListener("click",function(){g(),V(e,t,n)}),a.appendChild(o);var s=document.createElement("div");s.className="cj-al-suggestion__details",a.appendChild(s);var c=document.createElement("h1");c.className="cj-al-suggestion__title",c.textContent=r.name,s.appendChild(c);var d=document.createElement("p");d.className="cj-al-suggestion__subtitle",d.textContent=r.nu,s.appendChild(d);var l=document.createElement("div");l.className="cj-al-suggestion__actions",s.appendChild(l);var u=document.createElement("div");return u.className="cj-modern-button cj-al-suggestion__add",u.textContent="Add shortcut",u.addEventListener("click",function(){Y(e)}),s.appendChild(u),a}function X(){if(ve){var e=Ue&&Ue.url;e&&te.storage.local.get(["suggestionBlacklist","suggestionWhitelist"],function(t){var n=t.suggestionBlacklist||[],r=t.suggestionWhitelist||[],a=cjgShortcuts.findMatches(e);if(Array.isArray(a)&&0!==a.length){var i=a.filter(function(e){return Le.indexOf(e)===-1&&n.indexOf(e)===-1})[0];i&&(r.indexOf(i)!==-1?(Pe=Q(i,n,r),Be.parentNode.insertBefore(Pe,Be)):(r.push(i),r.sort(),te.storage.local.set({suggestionWhitelist:r})))}})}}function $(){var e=document.createDocumentFragment();if(Ne){var t=H();e.appendChild(t)}if(Be=D(),e.appendChild(Be),X(),Oe&&(qe=F(),e.appendChild(qe)),Ae){var n=I();e.appendChild(n)}document.body.appendChild(e),ze?(k(),setTimeout(k),setTimeout(k,1e3),setTimeout(k,4e3),te.runtime.onInstalled.addListener(N),te.runtime.onStartup.addListener(N),te.storage.onChanged.addListener(function(e,t){"sync"===t&&(e.userList&&e.userList.newValue.join(",")===Le.join(",")||N())})):(Z(),ae&&re&&J(0))}var ee,te="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,ne=navigator.userAgent.toLowerCase(),re=ne.indexOf("chrome")!==-1&&ne.indexOf("opr")===-1,ae=navigator.platform.toLowerCase().indexOf("mac")!==-1,ie=ae?"metaKey":"ctrlKey",oe=te.runtime.getURL("").startsWith("moz-"),se=function(){var e=["alg","alc","alf","sfg"],t=window.location.search,n=t.indexOf("extch=")!==-1&&t.split("extch=")[1].split("&")[0];if(e.indexOf(n)!==-1)return n;var r=["abekajjnoelgfclhinpadoipocjhjceh","baohinapilmkigilbbbcccncoljkdpnd"];return r.indexOf(te.runtime.id)!==-1?"sfg":oe?"alf":"alc"}(),ce="sfg"===se,de="alc"===se,le="alg"===se,ue=ce,pe=oe||ce,he=!le,me=ce,ge=de||le,fe=ce,ve=!0,we=!0,be=320,ye=window.location.search?JSON.parse('{"'+window.location.search.substring(1).replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)}):{},Ce={authuser:ye.authuser||null,pageId:ye.pageId||null},je=Ce.authuser&&"0"!==Ce.authuser?Ce.authuser:null,Ee="marketplace-cache-"+Ce.pageId+"-"+Ce.authuser;ae&&document.documentElement.classList.remove("cj-al--scrollbar");var _e,Le,xe,Se,ke,Ne,Ae,Oe,Ie,We,Te,Me,Ue,qe,Be,Pe,De,Re,ze="1"===ye.embedded,Ke=cjgShortcuts.list,Fe=!1;Promise.all([c(),i()]).then($)}();