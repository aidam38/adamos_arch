!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=58)}({19:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e&&e.constructor===Object}function i(e){if(!o(e))return e;for(var t=1,n=arguments.length;t<n;t++){var s=arguments[t];if(o(s))for(var a in s)o(s[a])?(e[a]||Object.assign(e,r({},a,{})),i(e[a],s[a])):Object.assign(e,r({},a,s[a]))}return e}function s(e,t){t&&u(t,function(t,n){e.style[t]=n})}function a(e,t){t&&u(t,function(t,n){null===n?e.removeAttributeNS(null,t):e.setAttributeNS(null,t,n)})}function u(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(e,n,e[n])}function c(e,t){if("string"==typeof e)return document.querySelectorAll(e);if(e&&e.selector){var n=e.root?c(e.root):document,r=n&&n.querySelectorAll(e.selector),o=r&&(r[e.index||0]||r[0]);return e.closest&&o?o.closest(e.closest):o}return null}function d(){var e=document.createElementNS(m,"svg");e.id="oddshotSVG",e.setAttributeNS(null,"version","1.1");var t=document.createElementNS(m,"g"),n=document.createElementNS(m,"path"),r=document.createElementNS(m,"path"),o=document.createElementNS(m,"path");return n.setAttributeNS(null,"d","M12.3981236,7.05421295 C12.3981236,7.05421295 12.3133461,6.95708461 12.6335508,\n  7.25841605 C14.4153748,8.93521695 15.3242425,11.4468553 14.8249779,14.0086774 C14.0473426,\n  17.9988732 10.1480555,20.5998088 6.1156765,19.8180296 C2.08329747,19.0362504 -0.555193625,\n  15.1678003 0.222441703,11.1776045 C0.743292638,8.50501856 2.66456705,6.45567727 5.08826905,\n  5.62856945 C5.62671611,5.48469642 5.87717731,5.78065121 5.65219275,6.28709781 C5.65219275,\n  6.28709781 3.85754606,10.1977976 3.54119994,11.8210301 C3.15719085,13.7914543 4.25904044,\n  16.04995 6.75569165,16.5339893 C9.25234285,17.0180286 11.1222106,15.3356759 11.5062197,\n  13.3652517 C11.8225658,11.7420192 11.6273873,7.44554121 11.6273873,7.44554121 C11.6075496,\n  6.89011711 11.9515931,6.70529347 12.3981236,7.05421295 L12.3981236,7.05421295 Z"),r.setAttributeNS(null,"d","M7.20370225,14.2351611 C8.12015203,14.4128382 9.00635363,13.8217165 9.18308894,\n  12.9148538 C9.35982424,12.0079911 8.76016717,11.1287979 7.84371739,10.9511208 C6.92726761,\n  10.7734437 6.041066,11.3645654 5.8643307,12.2714281 C5.6875954,13.1782908 6.28725247,\n  14.057484 7.20370225,14.2351611 L7.20370225,14.2351611 Z"),o.setAttributeNS(null,"d","M8.30428681,9.0531901 C9.40402655,9.2702792 9.6757138,9.08576109 9.88779616,\n  7.97773977 C10.0998785,6.86971846 10.0107176,0.137966427 10.0107176,0.137966427 C10.0107176,\n  0.137966427 7.44487194,6.34561901 7.23278958,7.45364032 C7.02070721,8.56166164 7.20454707,\n  8.836101 8.30428681,9.0531901 L8.30428681,9.0531901 Z"),t.appendChild(n),t.appendChild(r),t.appendChild(o),e.appendChild(t),e}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(t,n){chrome.runtime.sendMessage({message:"get-host-config",videoCapture:e},function(e){t(e)})})}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(this,n),this.nodes={},this.setConfig(e,t),this.icon=this.createNode("span",e),this.icon.setAttribute("data-oddshot",""),this.attachEvents()}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m="http://www.w3.org/2000/svg";l.prototype={setConfig:function(e,t){this.config=e,this.isReady=t},createNode:function(e,t){var n=t.tagName||e,r=document.createElement(n);return this.addChildNodes(r,t),r},addChildNodes:function(e,t){var n=this,r=t.nodes||{},o=t.children;o&&o.length&&o.forEach(function(t){var o=r[t];if(o){var i="svg"===t?d():n.createNode(t,o);n.nodes[t]=i,e.appendChild(i)}})},insertIcon:function(e){var t=this.icon,n=e.parent,r=e.before;if(n){if(!r||t.nextElementSibling!==r||!t.parentNode){this.removePreviousIcon(n);try{n.insertBefore(t,r)}catch(e){}}}else t.parentNode&&t.parentNode.removeChild(t)},removePreviousIcon:function(e){var t=e&&e.querySelector("[data-oddshot]");t&&t.parentNode===e&&e.removeChild(t)},attachEvents:function(){var e=this,t=this.icon;t.addEventListener("mouseenter",function(){e.focused=!0,e.refresh()}),t.addEventListener("mouseleave",function(){e.focused=!1,e.refresh()}),t.addEventListener("mousedown",function(){e.pressed=!0,e.refresh()}),t.addEventListener("mouseup",function(){e.pressed=!1,e.refresh()}),t.addEventListener("click",function(t){e.onClick(t)},!0)},findInsertPlace:function(e){if(e.parent&&e.parent.node)return{parent:e.parent.node,before:null};var t=c(e.parent);if(t){var n=h(e.insertBefore),r="number"===n?t.children[e.insertBefore]:"string"===n?t.querySelector(e.insertBefore):null;return{parent:r?r.parentNode:t,before:r}}return{}},refresh:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.config,n=this.isReady,r=n?t.active:t.inactive,o=n&&this.focused?t.focused:t.blurred,s=n&&this.pressed?t.pressed:null,a=i({},t,r,o,s);this.updateNode(this.icon,null,a),e&&this.attach()},updateNode:function(e,t,n){var r=this;if(s(e,n.style),a(e,n.attributes),e.setAttribute("class",n.className||""),n.fill&&"svg"===t){var o=e.firstElementChild;o&&o.setAttributeNS(null,"fill",n.fill)}"string"==typeof n.textContent&&(e.textContent=n.textContent),n.children&&n.children.length&&n.children.forEach(function(e){var t=r.nodes[e],o=n.nodes[e];r.updateNode(t,e,o)})},attach:function(){var e=this.findInsertPlace(this.config);this.icon.parentNode==e.parent&&this.icon.nextElementSibling==e.before||this.icon===e.before||this.insertIcon(e)},detach:function(){var e=this.icon;e&&e.parentNode&&e.parentNode.removeChild(e)},destroy:function(){this.detach(),this.nodes={}}},t.findNode=c,t.OddshotIcon=l,t.getHostConfig=f},58:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){g.forEach(function(e){return e.destroy()}),g.length=0}function i(e){y=e,g.forEach(function(t,n){var r=e.shotIcons[n];r&&t.setConfig(r,e.isReady)})}function s(){g.forEach(function(e){return e.refresh()})}function a(e){return e.value||e.textContent}function u(e){if(e&&e.input){var t=(0,p.findNode)(e.input),n=(0,p.findNode)(e.button);if(t&&t.getAttribute("data-ods")!=b){h("log","Chat: input has been found");var r=a(t);return t.addEventListener(e.inputEventName||"keyup",function(e){var n=e.keyCode||e.which,o=a(t);13===n&&(v.test(r)||v.test(o))&&(h("log","Chat: sending !shot message by keyboard"),chrome.runtime.sendMessage({message:"take-shot",eventType:"chat",streamId:b})),r=o}),t.setAttribute("data-ods",b),n&&n.addEventListener(e.buttonEventName||"mousedown",function(e){var n=a(t);n&&"!shot"===n.toLowerCase()&&(h("log","Chat: sending !shot message by button"),chrome.runtime.sendMessage({message:"take-shot",eventType:"chat",streamId:b}))}),!0}}return!1}function c(e,t){return!!(t.matches&&e.matches(t.matches)||e.querySelector(t.hasChild))||(t.property?e[t.property]:!!t.notProperty&&!e[t.notProperty])}function d(e){if(e&&!e.iframe){var t=(0,p.findNode)(e.node),n=e.order;if(t&&n){var r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value;if(e[u]&&c(t,e[u])){chrome.runtime.sendMessage({message:"set-stream-state",state:u,streamId:b});break}}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}}else e.selector&&!t&&(h("error","Cannot find player at selector "+e.selector),chrome.runtime.sendMessage({message:"set-stream-state",state:"offline",streamId:b}))}}function f(e){if(!e)return null;var t={streamURL:window.location.href},n=e&&("_parent"in e?e._parent&&(0,p.findNode)(e._parent):document);if(!n)return t;for(var r in e){var o=e[r];if(o&&"_"!==r[0]){var i="string"==typeof o?o:o.selector,s=i&&n.querySelector(i);s&&(o.reader?t[r]=(I[o.reader]||I.default)(s):o.attribute?t[r]=s.getAttribute(o.attribute)||s[o.attribute]:t[r]=I.default(s))}}return t}function l(){C=clearInterval(C),h("log","Cleanup with streamId = "+b),o();try{chrome.runtime.onMessage.removeListener(N)}catch(e){}}function h(e,t){chrome.runtime.sendMessage({message:e,params:[t]})}function m(e){var t=this.config.id;chrome.runtime.sendMessage({message:"take-shot",eventType:t?"icon-"+t:"icon",streamId:b})}var p=n(19),v=/(^|\b)!shot\b/i,g=[],y=void 0,b=-1,C=void 0,N=void 0,I={default:function(e){return e.textContent.trim()},backgroundImage:function(e){return e.style.backgroundImage.slice(4,-1).replace(/(^["']|["']$)/g,"")},hitboxMediaType:function(e){return e.player&&e.player.currentType_},textContentNumber:function(e){var t=e.textContent,n=t.match(/\d+/);return n?parseInt(n[0].replace(/\D+/g,""),10):null},youtubeMediaSequence:function(e){return parseInt(e.dataset.mediaSequence,10)},number:function(e){return parseInt(e.textContent.replace(/\D+/g,""),10)},textChildNodes:function(e){return Array.apply(null,e.childNodes).filter(function(e){return e.nodeType===Node.TEXT_NODE}).map(function(e){return e.textContent}).join("").replace(/(^\s+|\s+$)/g,"")}};chrome.runtime.onMessage.addListener(N=function(e,t,n){if(e.streamId&&b>0&&e.streamId!==b)return void l();switch(e.message){case"shot-ready":case"shot-not-ready":i(e.config),s();break;case"get-details":var r=f(e.config.streamDetails);chrome.runtime.sendMessage({message:"set-details",details:r,streamId:b});break;case"update":i(e.config),u(y.chat);break;case"remove-client-script":e.streamId===b&&l()}}),window.addEventListener("unload",function(){chrome.runtime.sendMessage({message:"unregister-frame"})}),(0,p.getHostConfig)().then(function(e){if(!e)return void l();var t=0,n=e.shotIcons.map(function(t){return new p.OddshotIcon(t,e.isReady,{onClick:m})});g.push.apply(g,r(n));var o=function(e){e?++t>=3&&l():(t=0,s(),d(y.player),u(y.chat))},i=function(){try{var e=f(y.streamDetails);e&&chrome.runtime.sendMessage({message:"set-details",details:e,streamId:b}),o()}catch(e){o(e)}};y=e,b=e.streamId,C=setInterval(function(){i()},1500),i()})}});